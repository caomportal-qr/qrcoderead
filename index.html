<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>QRコードをかざしてください</title>
<script src="instascan.min.js"></script>
<style>
body {
    margin: auto;
    width: 960px;
    text-align: center;
    color: gray;
}
</style>
</head>

<body>



<h1>QRコードをかざしてください</h1>

<video id="preview"></video>

<script>

var videoTag = document.getElementById('preview');
var scanner = new Instascan.Scanner({ video: videoTag });
scanner.addListener('scan', function (value) {
    location.href = value;
});

<!--Security.showSettings(SecurityPanel.CAMERA);
var cam:Camera = Camera.getCamera();
if ( cam != null ) {
	vid.attachCamera(cam);

}-->
cam = Instascan.Camera.getCamera("0");
var camComboBox:ComboBox = new ComboBox();
addChild(camComboBox);

	if (Camera.names.length != 0) { 
 		for (var i: int = 0; i < Camera.names.length; i++) { 
 			var item: Object = new Object(); 
 			item.label = Camera.names[i]; 
 			camComboBox.addItem(item);  
		}
	} else { 
 		var itemNull: Object = new Object(); 
 		itemNull.label = "カメラを接続してください"; 
 		camComboBox.addItem(itemNull); 
	}

camComboBox.addEventListener(Event.CHANGE, function () { 
 	cam = Instascan.Camera.getCamera(camComboBox.selectedIndex.toString()); 
	camVideo.attachCamera(cam);

        scanner.start(cameras[cam]);
}); 

Instascan.Camera.getCameras()
.then(function (cameras) {

    if (cameras.length > 0) {
        scanner.start(cameras[0]);
    }
    else {
        alert('カメラが見つかりません');
    }
})
.catch(function(err) {
    alert(err);
});



</script>



</body>
</html>